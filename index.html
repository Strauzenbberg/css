<!doctype html>
<html lang="pt-br">
<head>
<meta charset="utf-8">
<title>Html+Javascript+css view auto</title>
<style>
  body,html {margin:0;height:100%;display:flex;flex-direction:column;font-family:sans-serif;}
  header {background:#222;color:#fff;padding:8px;display:flex;gap:8px;align-items:center;}
  header button {padding:6px 12px;cursor:pointer;}
  .top {display:flex;flex:1;min-height:100px;}
  textarea {flex:1;padding:8px;font-family:monospace;font-size:14px;resize:none;border:1px solid #ccc;}
  .gutter {height:6px;background:#ddd;cursor:row-resize;}
  .bottom {flex:1;}
  iframe {width:100%;height:100%;border:0;}
</style>
</head>
<body>
  <header>
    <button id="clear">Limpar</button>
    <button id="download">Baixar</button>
  </header>
  <div class="top" id="top">
    <textarea id="html" placeholder="HTML"></textarea>
    <textarea id="css" placeholder="CSS"></textarea>
    <textarea id="js" placeholder="JS"></textarea>
  </div>
  <div class="gutter" id="gutter"></div>
  <div class="bottom"><iframe id="preview"></iframe></div>

<script>
const html = document.getElementById('html');
const css = document.getElementById('css');
const js = document.getElementById('js');
const iframe = document.getElementById('preview');

function render(){
  const code = `
<!doctype html>
<html><head><style>${css.value}</style></head>
<body>
${html.value}
<script>${js.value}<\/script>
</body></html>`;
  iframe.srcdoc = code;
}

// auto-execução em cada digitação
[html, css, js].forEach(ed => ed.addEventListener('input', render));

document.getElementById('clear').onclick = () => {
  html.value = css.value = js.value = '';
  render();
};
document.getElementById('download').onclick = () => {
  const blob = new Blob([iframe.srcdoc], {type:'text/html'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'projeto.html';
  a.click();
  URL.revokeObjectURL(a.href);
};

// Divisor arrastável
const gutter = document.getElementById('gutter');
let dragging=false,startY,startH;
gutter.addEventListener('mousedown',e=>{
  dragging=true;startY=e.clientY;startH=document.getElementById('top').offsetHeight;
});
window.addEventListener('mousemove',e=>{
  if(!dragging)return;
  const dy=e.clientY-startY;
  document.getElementById('top').style.height=(startH+dy)+'px';
});
window.addEventListener('mouseup',()=>dragging=false);

// Render inicial
render();
</script>
</body>
</html>
