<!doctype html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Editor de CSS em tempo real</title>
<style>
  :root {
    --bg: #0b0f14;
    --panel: #0f1520;
    --panel-2: #0c111b;
    --text: #e6edf3;
    --muted: #98a2b3;
    --accent: #5b9cf3;
    --accent-2: #7dd3fc;
    --danger: #ef4444;
    --ok: #22c55e;
    --border: #1f2a37;
    --shadow: 0 10px 30px rgba(0,0,0,.35);
    --radius: 12px;
    --mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    --sans: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
  }

  * { box-sizing: border-box; }
  html, body { height: 100%; }
  body {
    margin: 0;
    background: radial-gradient(1200px 800px at 80% -20%, rgba(91,156,243,.15), rgba(0,0,0,0)) fixed,
                radial-gradient(900px 600px at -10% 110%, rgba(125,211,252,.12), rgba(0,0,0,0)) fixed,
                var(--bg);
    color: var(--text);
    font: 14px/1.5 var(--sans);
  }

  header {
    position: sticky; top: 0; z-index: 5;
    background: linear-gradient(180deg, rgba(15,21,32,.9), rgba(15,21,32,.7));
    backdrop-filter: blur(8px);
    border-bottom: 1px solid var(--border);
  }
  .bar {
    max-width: 1200px; margin: 0 auto; padding: 12px 16px;
    display: flex; gap: 12px; align-items: center; justify-content: space-between;
  }
  .title {
    display: flex; gap: 12px; align-items: center; font-weight: 700;
    letter-spacing: .2px;
  }
  .dot {
    width: 11px; height: 11px; border-radius: 50%;
    background: linear-gradient(180deg, var(--accent), var(--accent-2));
    box-shadow: 0 0 0 4px rgba(91,156,243,.15);
  }

  .actions { display: flex; gap: 8px; align-items: center; }
  button, .select {
    appearance: none; border: 1px solid var(--border);
    background: linear-gradient(180deg, var(--panel), var(--panel-2));
    color: var(--text); padding: 8px 12px; border-radius: 10px;
    display: inline-flex; align-items: center; gap: 8px; cursor: pointer;
    transition: transform .04s ease, border-color .2s ease, background .2s ease;
  }
  button:hover, .select:hover { border-color: #274060; }
  button:active { transform: translateY(1px); }
  .primary {
    background: linear-gradient(180deg, #1a4b9a, #103a7a);
    border-color: #22529c;
  }
  .danger { border-color: rgba(239,68,68,.35); color: #fecaca; }
  .ok { border-color: rgba(34,197,94,.35); color: #bbf7d0; }
  .select { padding: 0; overflow: hidden; }
  .select select {
    padding: 8px 12px; background: transparent; border: 0; color: inherit; outline: none;
  }

  .wrap {
    max-width: 1200px; margin: 16px auto; padding: 0 16px 16px;
    display: grid; gap: 16px;
    grid-template-columns: 1fr; grid-auto-rows: minmax(0, 1fr);
  }
  @media (min-width: 980px) {
    .wrap { grid-template-columns: 1fr 1fr; }
  }

  .panel {
    background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00)) , var(--panel);
    border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow);
    overflow: hidden; display: flex; flex-direction: column; min-height: 320px;
  }
  .panel header {
    position: sticky; inset: 0; border-bottom: 1px solid var(--border);
    background: linear-gradient(180deg, rgba(11,15,20,.9), rgba(11,15,20,.6));
    padding: 10px 12px; display: flex; align-items: center; justify-content: space-between;
  }
  .panel h2 {
    margin: 0; font-size: 13px; text-transform: uppercase; letter-spacing: .12em; color: var(--muted);
  }

  .editor {
    position: relative; flex: 1; display: grid; grid-template-rows: auto 1fr auto; min-height: 0;
  }
  .editor textarea {
    width: 100%; height: 100%; resize: none; border: 0; outline: none;
    background: transparent; color: var(--text); font: 13.5px/1.6 var(--mono);
    padding: 14px; caret-color: var(--accent);
  }
  .statusbar {
    border-top: 1px solid var(--border);
    padding: 8px 12px; color: var(--muted); font-size: 12px; display: flex; gap: 16px;
  }

  .preview {
    flex: 1; min-height: 0; background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.00));
    display: grid; grid-template-rows: auto 1fr; overflow: hidden;
  }
  .preview .surface {
    background: #ffffff; color: #0b1220; overflow: auto;
  }
  .preview header {
    padding: 10px 12px; display: flex; align-items: center; justify-content: space-between;
  }
  .badge {
    font-size: 12px; color: var(--muted);
    padding: 4px 8px; border: 1px dashed var(--border); border-radius: 999px;
  }

  /* Conteúdo da página de demonstração */
  .surface .page {
    font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
    color: #0f172a; background: #f8fafc; min-height: 100%; padding: 36px;
  }
  .hero {
    background: linear-gradient(135deg, #e0f2fe, #f0f9ff);
    border: 1px solid #dbeafe; border-radius: 16px; padding: 28px;
    display: grid; gap: 8px; margin-bottom: 24px;
  }
  .hero h1 { margin: 0; font-size: 28px; letter-spacing: .2px; }
  .hero p { margin: 0; color: #334155; }
  .grid {
    display: grid; gap: 16px; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  }
  .card {
    background: #ffffff; border: 1px solid #e5e7eb; border-radius: 14px; padding: 16px;
    display: grid; gap: 8px; transition: transform .12s ease, box-shadow .12s ease;
  }
  .card:hover { transform: translateY(-2px); box-shadow: 0 12px 22px rgba(2,6,23,.08); }
  .card h3 { margin: 0; font-size: 16px; }
  .card p { margin: 0; color: #475569; font-size: 14px; }
  .pill {
    display: inline-block; font-size: 11px; padding: 4px 8px; border-radius: 999px;
    background: #eff6ff; color: #1d4ed8; border: 1px solid #dbeafe;
  }

  .footer {
    margin-top: 24px; display: flex; gap: 12px; align-items: center; color: #475569; font-size: 13px;
  }
  .footer .dot { background: #22c55e; box-shadow: none; width: 8px; height: 8px; }

  /* Scrollbars */
  ::-webkit-scrollbar { width: 10px; height: 10px; }
  ::-webkit-scrollbar-thumb { background: #202a39; border-radius: 999px; border: 2px solid #0f1520; }
  ::-webkit-scrollbar-track { background: transparent; }
</style>
</head>
<body>
  <header>
    <div class="bar">
      <div class="title">
        <span class="dot"></span>
        <span>Editor de CSS em tempo real</span>
      </div>
      <div class="actions">
        <div class="select" title="Tema do painel">
          <select id="theme">
            <option value="dark" selected>Dark</option>
            <option value="light">Light</option>
          </select>
        </div>
        <button id="copy" class="ok" title="Copiar CSS">Copiar</button>
        <button id="download" class="primary" title="Baixar CSS">Baixar</button>
        <button id="reset" class="danger" title="Limpar CSS">Limpar</button>
      </div>
    </div>
  </header>

  <div class="wrap">
    <section class="panel editor" aria-label="Editor de CSS">
      <header>
        <h2>CSS</h2>
        <span class="badge" id="lint">Pronto</span>
      </header>
      <textarea id="css" spellcheck="false" aria-label="Área para digitar CSS"></textarea>
      <div class="statusbar">
        <span id="chars">0 caracteres</span>
        <span id="updated">sem alterações</span>
        <span style="margin-left:auto">Dica: selecione elementos como .hero, .card, .pill…</span>
      </div>
    </section>

    <section class="panel preview" aria-label="Pré-visualização">
      <header>
        <h2>Pré-visualização</h2>
        <span class="badge">HTML de exemplo</span>
      </header>
      <div class="surface">
        <!-- Estilo vivo aplicado aqui -->
        <style id="live-style"></style>
        <div class="page">
          <div class="hero">
            <span class="pill">Demo</span>
            <h1>Seu CSS, seus pixels.</h1>
            <p>Edite o bloco de CSS e veja o resultado aparecer instantaneamente.</p>
          </div>
          <div class="grid">
            <article class="card">
              <h3>.card elegante</h3>
              <p>Brinque com bordas, sombras e transições.</p>
            </article>
            <article class="card">
              <h3>Tipografia</h3>
              <p>Experimente fontes, tamanhos e espaçamentos.</p>
            </article>
            <article class="card">
              <h3>Cores</h3>
              <p>Troque temas, gradientes e estados de hover.</p>
            </article>
            <article class="card">
              <h3>Layout</h3>
              <p>Grid, flex e alinhamentos criativos.</p>
            </article>
          </div>
          <div class="footer">
            <span class="dot"></span>
            <span>Render em tempo real • Sem build • Tudo em um arquivo</span>
          </div>
        </div>
      </div>
    </section>
  </div>

<script>
(function () {
  const $ = (sel, root = document) => root.querySelector(sel);

  const el = {
    css: $('#css'),
    live: $('#live-style'),
    chars: $('#chars'),
    updated: $('#updated'),
    lint: $('#lint'),
    copy: $('#copy'),
    download: $('#download'),
    reset: $('#reset'),
    theme: $('#theme'),
    body: document.body
  };

  const KEY = 'live-css-editor-snippet.v1';
  const DEFAULT_CSS = `/* Exemplo: personalize a pré-visualização à direita */

/* Tema */
.page { background: #f8fafc; color: #0f172a; }
.hero {
  background: linear-gradient(120deg, #dbeafe, #eff6ff);
  border-radius: 16px;
  border: 1px solid #bfdbfe;
}
.pill { background: #eef2ff; color: #3730a3; border-color: #c7d2fe; }

/* Interações */
.card { transition: transform .15s ease, box-shadow .15s ease; }
.card:hover { transform: translateY(-4px) scale(1.01); box-shadow: 0 18px 32px rgba(2,6,23,.10); }

/* Tipografia */
.hero h1 { letter-spacing: .3px; }
.card h3 { font-weight: 700; }
.card p { color: #334155; }

/* Experimente:
.grid { grid-template-columns: repeat(3, 1fr); gap: 24px; }
.hero { background: linear-gradient(135deg, #f0abfc, #93c5fd); color: #0b1220; }
*/`;

  // Debounce util
  const debounce = (fn, wait = 120) => {
    let t;
    return (...args) => {
      clearTimeout(t);
      t = setTimeout(() => fn.apply(null, args), wait);
    };
  };

  // Load initial CSS
  const saved = localStorage.getItem(KEY);
  el.css.value = saved ?? DEFAULT_CSS;
  applyCSS(el.css.value, false);

  // Apply CSS
  function applyCSS(code, markChanged = true) {
    el.live.textContent = code;
    el.chars.textContent = `${code.length} ${code.length === 1 ? 'caractere' : 'caracteres'}`;
    if (markChanged) {
      const now = new Date();
      el.updated.textContent = `atualizado ${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}:${String(now.getSeconds()).padStart(2,'0')}`;
    }
    // "Lint" muito básico: fecha chaves?
    const open = (code.match(/{/g) || []).length;
    const close = (code.match(/}/g) || []).length;
    if (open !== close) {
      el.lint.textContent = `Atenção: ${open} { / ${close} }`;
      el.lint.style.color = '#fecaca';
    } else {
      el.lint.textContent = 'Pronto';
      el.lint.style.color = '';
    }
  }

  const update = debounce((v) => {
    applyCSS(v);
    try { localStorage.setItem(KEY, v); } catch {}
  }, 80);

  el.css.addEventListener('input', (e) => update(e.target.value));

  // Copy
  el.copy.addEventListener('click', async () => {
    try {
      await navigator.clipboard.writeText(el.css.value);
      flash(el.copy, 'Copiado!', 900);
    } catch {
      flash(el.copy, 'Falhou :(', 900);
    }
  });

  // Download
  el.download.addEventListener('click', () => {
    const blob = new Blob([el.css.value], { type: 'text/css' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'estilos.css';
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  });

  // Reset
  el.reset.addEventListener('click', () => {
    if (!confirm('Limpar e voltar ao CSS de exemplo?')) return;
    el.css.value = DEFAULT_CSS;
    applyCSS(el.css.value);
    try { localStorage.setItem(KEY, el.css.value); } catch {}
  });

  // Theme switch (painel)
  el.theme.addEventListener('change', () => {
    const t = el.theme.value;
    if (t === 'light') {
      document.documentElement.style.setProperty('--bg', '#f6f7fb');
      document.documentElement.style.setProperty('--panel', '#ffffff');
      document.documentElement.style.setProperty('--panel-2', '#fafafa');
      document.documentElement.style.setProperty('--text', '#0b1220');
      document.documentElement.style.setProperty('--muted', '#475569');
      document.documentElement.style.setProperty('--border', '#e5e7eb');
    } else {
      document.documentElement.style.setProperty('--bg', '#0b0f14');
      document.documentElement.style.setProperty('--panel', '#0f1520');
      document.documentElement.style.setProperty('--panel-2', '#0c111b');
      document.documentElement.style.setProperty('--text', '#e6edf3');
      document.documentElement.style.setProperty('--muted', '#98a2b3');
      document.documentElement.style.setProperty('--border', '#1f2a37');
    }
  });

  // Tiny UI feedback
  function flash(btn, text, ms = 800) {
    const original = btn.textContent;
    btn.textContent = text;
    btn.style.transform = 'translateY(0)';
    setTimeout(() => { btn.textContent = original; }, ms);
  }

  // Quality-of-life: Tab indentation inside textarea
  el.css.addEventListener('keydown', (e) => {
    if (e.key === 'Tab') {
      e.preventDefault();
      const start = el.css.selectionStart;
      const end = el.css.selectionEnd;
      const value = el.css.value;
      if (e.shiftKey) {
        // Unindent
        const before = value.slice(0, start);
        const selection = value.slice(start, end);
        const after = value.slice(end);
        const lines = selection.split('\n');
        const newSel = lines.map(line => line.startsWith('  ') ? line.slice(2) : line.replace(/^\t/, '')).join('\n');
        el.css.value = before + newSel + after;
        el.css.selectionStart = start;
        el.css.selectionEnd = start + newSel.length;
      } else {
        // Indent
        const before = value.slice(0, start);
        const after = value.slice(end);
        const sel = value.slice(start, end);
        const toInsert = sel ? sel.replace(/^/gm, '  ') : '  ';
        el.css.value = before + toInsert + after;
        const cursor = sel ? start + toInsert.length : start + 2;
        el.css.selectionStart = el.css.selectionEnd = cursor;
      }
      update(el.css.value);
    }
  });

  // Initial focus for quick start
  setTimeout(() => {
    el.css.focus();
    el.css.setSelectionRange(el.css.value.length, el.css.value.length);
  }, 50);
})();
</script>
</body>
</html>
